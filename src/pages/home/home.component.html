<section class="entire-component overflow-hidden relative flex flex-col items-center justify-center gap-6 py-16 px-24 w-full h-full bg-bg-primary">
    <span [ngClass]="{'glowing-effect': textAnimationComplete === true }" class="main-txt text-9xl font-extrabold tracking-tight text-center M-Regular text-accent"></span>
  
    <div class="button-holder opacity-0 flex items-center gap-12">  
      <span (click)="navigateToGame()" class="options relative text-text-primary cursor-pointer G-SemiBold text-lg  text-center py-1">Local</span>
      <span (click)="toggleMultiplayerDialog()" class="options relative text-text-primary cursor-pointer G-SemiBold text-lg  text-center py-1">Multiplayer</span>
    </div>
  
  
    <div class="absolute bottom-16 flex items-center justify-between w-full px-16">
      <div class="left text-accent G-Medium text-sm tracking-tight">Made by Daniel Glover w/ love ❤️</div>
  
  
      <div class="theme-selector flex gap-4">
        @for (item of themeService.availableThemes; track $index) {
          <div 
            (click)="changeTheme(item.className)" 
            class="theme cursor-pointer G-Regular text-sm tracking-tight"
            [ngClass]="{'text-text-primary': item.className !== selectedTheme.className, 'text-accent G-Bold': item.className === selectedTheme.className}">
            {{item.name}}
          </div>
        }
    
      </div>
    </div>
</section>
  
  
  @if(isMultiplayerMode){
    <div
        class="entire-dialog flex items-end lg:items-center justify-center w-full h-[100dvh] fixed top-0 z-[100000] left-0 theme-{{selectedTheme}}">
        <div (click)="toggleMultiplayerDialog()" class="layer absolute top-0 left-0 w-full h-full bg-[#10182836] overflow-hidden"></div>
    
        
          <div class="email-dialog-container w-full lg:w-[35rem] bg-bg-primary border border-accent flex p-6 flex-col lg:rounded-lg relative z-[1000]">
  
            @if (multiplayerStatus === '') {
              <div class="left flex flex-col items-center gap-2 gap-y-4">
                <span class="G-Medium tracking-tight text-center text-lg text-accent">What do you wish to do in multiplayer mode?</span>
    
                <div class="flex w-full items-center justify-center gap-4">
                  <span (click)="toggleMultiplayerStatus('join-game')" class="options relative text-text-primary cursor-pointer G-SemiBold text-lg  text-center py-1">Join a Lobby</span>
                  <span (click)="toggleMultiplayerStatus('create-game')" class="options relative text-text-primary cursor-pointer G-SemiBold text-lg  text-center py-1">Create a Lobby</span>
                </div>
    
              </div>
            }
  
  
            @if (multiplayerStatus === 'join-game') {
  
              @if (!currentLobby) {
                <div class="left flex flex-col items-start gap-4">
                  <app-input-regular (keydown.enter)="createLobby(); $event.preventDefault()" class="w-full" [(ngModel)]="playerName" label="Enter your name" type="text"></app-input-regular>
                  <app-input-regular (keydown.enter)="createLobby(); $event.preventDefault()" class="w-full" [(ngModel)]="lobbyCodeForJoining" label="Enter lobby code" type="text"></app-input-regular>
    
                  <!-- <app-button (click)="joinLobby()" variant="primary" type="button" label="Add" class="flex-shrink-0"></app-button> -->
  
                  <span (click)="joinLobby()" class="options relative text-text-primary cursor-pointer G-SemiBold text-lg  text-center py-1">Join</span>
  
                </div>
              }@else {
                <div class="flex items-center flex-col gap-1">
                  <span class="G-Regular text-accent">You have joined {{currentLobby.players[0].name}}'s Lobby</span>
                  <div class="flex items-center gap-3">
                    <div class="dot w-2 h-2 rounded-full bg-accent animate-pulse"></div>
                    <span class="G-Regular text-sm text-text-primary">Waiting for host to start the game...</span>
                  </div>

                  <div class="flex items-center gap-3">
                    <div [ngClass]="{'bg-green-600' : currentPlayer?.isReady === true, 'bg-red-600' : !currentPlayer?.isReady}" class="dot w-2 h-2 rounded-full animate-pulse"></div>
                    <span class="G-Regular text-sm text-text-primary">{{ currentPlayer?.isReady ? 'Ready' : 'Not Ready' }}</span>
                  </div>


                  <div class="flex justify-end w-full">
                    <span (click)="readyUp(true, currentLobby.code, playerName)"
                    class="options disabled:cursor-not-allowed relative text-text-primary cursor-pointer G-SemiBold text-lg text-center py-1">
                    Ready Up
                    </span>
                  </div>
                </div>
              }
  
            }@else {
              @if (!currentLobby && multiplayerStatus === 'create-game') {
                <div class="left flex flex-col items-start gap-6">
                  <app-input-regular class="w-full" [(ngModel)]="playerName" label="Enter your name" type="text"></app-input-regular>
                  <app-input-regular class="w-full" [(ngModel)]="wordCount" label="How many words for this lobby?" type="text"></app-input-regular>

                  <div class="time-input flex flex-col items-start gap-2">
                    <span class="G-Regular tracking-tight text-accent">How many seconds?</span>
                    <div class="time-list flex items-center gap-3">
                      @for (item of time; track $index) {
                        <button (click)="changeTime(item)" [ngClass]="{'text-accent G-SemiBold': item === timeLimit, 'text-text-primary': item !== timeLimit}" class="single-time cursor-pointer">{{item}}</button>
                      }
                    </div>
                  </div>


                  <!-- <app-button (click)="createLobby()" variant="primary" type="button" label="Add" class="flex-shrink-0"></app-button> -->
                    <span (click)="createLobby()"
                    class="options disabled:cursor-not-allowed relative text-text-primary cursor-pointer G-SemiBold text-lg text-center py-1">
                    Create
                    </span>
  
                </div>
            }@else if (currentLobby && currentLobby.code && multiplayerStatus === 'create-game') {
                <div class="left flex flex-col items-center gap-1">
                  <span class="G-Regular tracking-tight text-sm text-text-primary">Lobby Code</span>
                  <span class="G-SemiBold text-4xl tracking-tight text-accent">{{ currentLobby.code }}</span>
                  <span class="G-Regular text-sm text-text-primary">Share this code with your friends to join the game!</span>


                  <div class="flex items-center justify-center gap-12">
                    <span class="G-Regular tracking-tight text-accent">{{currentLobby.timeLimit}} seconds</span>
                    <span class="G-Regular tracking-tight text-accent">{{currentLobby.wordCount}} words</span>

                  </div>
                </div>
      
                <div class="middle pt-6">
                  <!-- LIST OF JOINED PLAYERS -->
                  <span class="G-Regular text-sm text-accent">Currently in lobby</span>
                  <div class="joined-players flex flex-col gap-1 mt-2">
                    @for (player of currentLobby.players; track $index) {
                      <div class="flex items-center gap-3">
                        <div [ngClass]="{ 'bg-green-600': player.isReady, 'bg-accent': !player.isReady }" class="dot w-2 h-2 rounded-full animate-pulse"></div>
                        <span class="G-SemiBold text-accent">{{player.name}}</span>
                      </div>
                    }
                   </div>
      
                </div>
      
                <div class="right flex items-center justify-between w-full mt-4">
                  <span (click)="readyUp(true, currentLobby.code, playerName)"
                    class="options disabled:cursor-not-allowed relative text-text-primary cursor-pointer G-SemiBold text-lg text-center py-1">
                    Ready Up
                    </span>
                  <span (click)="startGame(currentLobby.code, currentLobby.timeLimit, currentLobby.wordCount)" class="options relative text-text-primary cursor-pointer G-SemiBold text-lg  text-center py-1">Start Game</span>
                </div>
            }
  
            }
  
          </div>
  
        
    
    </div>
  }